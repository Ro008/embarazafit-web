---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Plan de Parto | Embarazafit">
  <section class="birth-plan-container" id="birth-plan-container">
    <h2 class="pdf-title">Mi Plan de Parto</h2>
    <div class="language-selector">
      <a href="/plan-de-parto" class="lang-btn active">Español</a>
      <a href="/birth-plan" class="lang-btn">English</a>
    </div>

    <div class="instructions">
      <p>
        He creado este plan de parto inspirada en las recomendaciones de mi
        matrona, una maravillosa profesional defensora del parto respetado,
        donde nosotras seamos las protagonistas.
        <br /><br />
        <strong>Recuerda:</strong> Este es un documento guía. Te animo a que lo
        comentes con tu equipo médico. Si te queda alguna duda o tienes alguna
        sugerencia de mejora, puedes dejarme un comentario en
        <a
          href="https://www.instagram.com/reel/DNGKE9jtsKD/?utm_source=ig_web_copy_link&igsh=MzRlODBiNWFlZA=="
          target="_blank"
          >este vídeo</a
        >
        .
      </p>

      <p>
        Este es un plan de parto interactivo. Simplemente haz clic en
        <i>"Añadir al plan"</i> en cada opción que te interese, y se irá
        añadiendo a tu lista de preferencias. Cuando hayas terminado, haz clic
        en <i>"Generar PDF"</i>
        para obtener tu documento final personalizado.
      </p>
    </div>

    <p class="intro-text">
      Hemos redactado este plan de parto de acuerdo con nuestros deseos para el
      nacimiento de nuestro/a hijo/a, después de asistir a sesiones prenatales
      de preparación al parto y de haber sido informados de nuestras opciones.
      Nuestras elecciones han sido tomadas conjuntamente y basadas en las
      directrices de organizaciones reconocidas que promueven el parto natural y
      la lactancia materna. Nos gustaría colaborar con nuestro equipo médico
      para garantizar una experiencia de parto tranquila y segura que apoye la
      salud física y emocional de la madre y de nuestro/a hijo/a. Estaremos
      encantados de discutir cualquier pregunta o inquietud que podáis tener.
    </p>

    <div id="personal-info-section" class="plan-section">
      <h3>Información Personal</h3>
      <div class="input-group">
        <label for="mother-name">Nombre de la Madre:</label>
        <input type="text" id="mother-name" name="mother-name" />
      </div>
      <div class="input-group">
        <label for="name-pronunciation">Pronunciación del Nombre:</label>
        <input
          type="text"
          id="name-pronunciation"
          name="name-pronunciation"
          placeholder="ej. ro-SEE-oh"
        />
      </div>
      <div class="input-group">
        <label for="companion-name">Nombre del Acompañante:</label>
        <input type="text" id="companion-name" name="companion-name" />
      </div>
      <div class="input-group">
        <label for="hospital">Hospital:</label>
        <input type="text" id="hospital" name="hospital" />
      </div>
      <div class="input-group">
        <label for="gynecologist">Ginecólogo/a:</label>
        <input type="text" id="gynecologist" name="gynecologist" />
      </div>
      <div class="input-group">
        <label for="pediatrician">Pediatra:</label>
        <input type="text" id="pediatrician" name="pediatrician" />
      </div>
    </div>

    <div class="user-plan-container">
      <h3 class="draft-title">Mi Borrador de Plan de Parto</h3>
      <ul id="user-plan-list"></ul>
      <button id="generate-pdf-btn">Generar PDF</button>
    </div>

    <div
      id="delivery-type-section"
      class="plan-section"
      data-section-title="Tipo de Parto"
    >
      <h3>Tipo de Parto</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="Parto natural sin intervenciones médicas"
        >
          <span>Parto natural sin intervenciones médicas</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="Parto vaginal normal">
          <span>Parto vaginal normal</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="Cesárea con epidural">
          <span>Cesárea con epidural</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Cesárea con anestesia general"
        >
          <span>Cesárea con anestesia general</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="PVDC (Parto Vaginal Después de Cesárea)"
        >
          <span>PVDC (Parto Vaginal Después de Cesárea)</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div
      id="people-present-section"
      class="plan-section"
      data-section-title="Personas Presentes Durante el Parto"
    >
      <h3>Personas Presentes Durante el Parto</h3>
      <div class="option-list">
        <div class="option-item" data-option-text="Pareja/Cónyuge">
          <span>Pareja/Cónyuge</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="Familiar">
          <span>Familiar</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="Otra persona de apoyo">
          <span>Otra persona de apoyo</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div
      id="preparation-section"
      class="plan-section"
      data-section-title="Preparación para el Parto"
    >
      <h3>Preparación para el Parto</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="No deseo rasurado de la zona genital"
        >
          <span>No deseo rasurado de la zona genital</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="No quiero un enema">
          <span>No quiero un enema</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Prefiero no tener una vía IV si es posible moverme, aunque una vía sellada con suero es aceptable si es necesario"
        >
          <span
            >Prefiero no tener una vía IV si es posible moverme, aunque una vía
            sellada con suero es aceptable si es necesario</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div
      id="monitoring-section"
      class="plan-section"
      data-section-title="Monitorización Fetal"
    >
      <h3>Monitorización Fetal</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="Prefiero cardiotocografía intermitente"
        >
          <span>Prefiero cardiotocografía intermitente</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Prefiero cardiotocografía continua"
        >
          <span>Prefiero cardiotocografía continua</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div
      id="environment-section"
      class="plan-section"
      data-section-title="Ambiente y Preferencias Personales"
    >
      <h3>Ambiente y Preferencias Personales</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="Solicitar a todo el personal que se presente y explique su rol antes de cualquier procedimiento"
        >
          <span
            >Me gustaría que el personal que entre en la sala se presente y
            explique su rol antes de cualquier procedimiento</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Me gustaría un ambiente cálido y tranquilo en la sala de partos"
        >
          <span
            >Me gustaría un ambiente cálido y tranquilo en la sala de
            partos</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Minimizar la presencia de personal de la clínica"
        >
          <span>Minimizar la presencia de personal de la clínica</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="Iluminación tenue">
          <span>Iluminación tenue</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="Música personal">
          <span>Música personal</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="Vestir mi propia ropa">
          <span>Vestir mi propia ropa</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="Pelota de parto/almohadas">
          <span>Pelota de parto/almohadas</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Opción de fotografiar/filmar libremente"
        >
          <span>Opción de fotografiar/filmar libremente</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Baño o ducha, si están disponibles"
        >
          <span>Baño o ducha, si están disponibles</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div
      id="pain-relief-section"
      class="plan-section"
      data-section-title="Alivio del Dolor Durante el Trabajo de Parto"
    >
      <h3>Alivio del Dolor Durante el Trabajo de Parto</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="Métodos naturales de alivio del dolor (movimiento, posición corporal, masaje, respiración, compresas de calor, etc.)"
        >
          <span
            >Métodos naturales de alivio del dolor (movimiento, posición
            corporal, masaje, respiración, compresas de calor, etc.)</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="Apoyo de la matrona/pareja">
          <span>Apoyo de la matrona/pareja</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Libertad para la expresión espontánea (vocalización, movimiento)"
        >
          <span
            >Libertad para la expresión espontánea (vocalización,
            movimiento)</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="Epidural 'caminante'">
          <span>Epidural 'caminante'</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Epidural solo si la solicito y después de haber sido informada de los posibles efectos en el bebé y el parto"
        >
          <span
            >Epidural solo si la solicito y después de haber sido informada de
            los posibles efectos en el bebé y el parto</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div
      id="labor-onset-section"
      class="plan-section"
      data-section-title="Inicio y Progresión del Parto"
    >
      <h3>Inicio y Progresión del Parto</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="Prefiero el inicio espontáneo del parto y estoy dispuesta a esperar"
        >
          <span
            >Prefiero el inicio espontáneo del parto y estoy dispuesta a
            esperar</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Si la inducción o aumento es necesaria, deseo ser informada de las razones exactas y que solo se proceda si es médicamente necesario"
        >
          <span
            >Si la inducción o aumento es necesaria, deseo ser informada de las
            razones exactas y que solo se proceda si es médicamente
            necesario</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div
      id="interventions-section"
      class="plan-section"
      data-section-title="Intervenciones y Monitorización Médica"
    >
      <h3>Intervenciones y Monitorización Médica</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="Limitar los tactos vaginales a cada 4 horas y requerir consentimiento explícito"
        >
          <span
            >Limitar los tactos vaginales a cada 4 horas y requerir
            consentimiento explícito</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Prefiero evitar el uso de ventosa o fórceps a menos que sea médicamente crítico"
        >
          <span
            >Prefiero evitar el uso de ventosa o fórceps a menos que sea
            médicamente crítico</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="No doy mi consentimiento para la maniobra de Kristeller"
        >
          <span
            >No doy mi consentimiento para la maniobra de Kristeller (presión en
            el fondo del útero)</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>
    <div
      id="active-labor-section"
      class="plan-section"
      data-section-title="Pujo y Parto Activo"
    >
      <h3>Pujo y Parto Activo</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="Minimizar la presencia de personal al esencial (pareja, matrona, médico, pediatra)"
        >
          <span
            >Minimizar la presencia de personal al esencial (pareja, matrona,
            médico, pediatra)</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Deseo empezar a pujar cuando sienta la necesidad"
        >
          <span>Deseo empezar a pujar cuando sienta la necesidad</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Me gustaría que me guíen sobre cuándo pujar"
        >
          <span>Me gustaría que me guíen sobre cuándo pujar</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Prefiero elegir la posición de pujo más cómoda"
        >
          <span>Prefiero elegir la posición de pujo más cómoda</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Prefiero evitar la episiotomía a menos que sea absolutamente necesaria"
        >
          <span
            >Prefiero evitar la episiotomía a menos que sea absolutamente
            necesaria</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Para prevenir trauma perineal, prefiero pujo suave con masaje con aceite, soporte del perineo y ajustes de posición"
        >
          <span
            >Para prevenir trauma perineal, prefiero pujo suave con masaje con
            aceite, soporte del perineo y ajustes de posición</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div
      id="after-birth-section"
      class="plan-section"
      data-section-title="Inmediatamente Después del Parto"
    >
      <h3>Inmediatamente Después del Parto</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="Colocar a mi bebé en mi pecho, piel con piel"
        >
          <span>Colocar a mi bebé en mi pecho, piel con piel</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Pinzamiento tardío del cordón (al menos 3-5 minutos)"
        >
          <span>Pinzamiento tardío del cordón (al menos 3-5 minutos)</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div class="option-item" data-option-text="Mi pareja cortará el cordón">
          <span>Mi pareja cortará el cordón</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Sostener al bebé durante la expulsión de la placenta y cualquier sutura perineal"
        >
          <span
            >Sostener al bebé durante la expulsión de la placenta y cualquier
            sutura perineal</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Primera toma al pecho dentro de la primera hora"
        >
          <span>Primera toma al pecho dentro de la primera hora</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Recolección de células madre del cordón umbilical (tengo el kit de recolección)"
        >
          <span
            >Recolección de células madre del cordón umbilical (tengo el kit de
            recolección)</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div
      id="cesarean-section"
      class="plan-section"
      data-section-title="En Caso de Cesárea"
    >
      <h3>En Caso de Cesárea</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="Me gustaría evitar la cesárea a menos que sea absolutamente necesaria"
        >
          <span
            >Me gustaría evitar la cesárea a menos que sea absolutamente
            necesaria</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Prefiero la epidural a la anestesia general"
        >
          <span>Prefiero la epidural a la anestesia general</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Deseo ser informada durante todo el procedimiento si estoy consciente"
        >
          <span
            >Deseo ser informada durante todo el procedimiento si estoy
            consciente</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Mantener mis manos libres para sostener a mi bebé"
        >
          <span>Mantener mis manos libres para sostener a mi bebé</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Contacto piel con piel y lactancia materna en el quirófano"
        >
          <span
            >Contacto piel con piel y lactancia materna en el quirófano</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div
      id="newborn-care-section"
      class="plan-section"
      data-section-title="Cuidado del Recién Nacido"
    >
      <h3>Cuidado del Recién Nacido</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="Secar suavemente al bebé y colocarlo en mi pecho"
        >
          <span>Secar suavemente al bebé y colocarlo en mi pecho</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Retrasar el baño del bebé al menos 24 horas"
        >
          <span>Retrasar el baño del bebé al menos 24 horas</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Realizaremos el primer baño en casa"
        >
          <span>Realizaremos el primer baño en casa</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="No administrar inyección de vitamina K"
        >
          <span>No administrar inyección de vitamina K</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="No usar chupetes ni biberones"
        >
          <span>No usar chupetes ni biberones</span>
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div
      id="feeding-plan-section"
      class="plan-section"
      data-section-title="Plan de Alimentación"
    >
      <h3>Plan de Alimentación</h3>
      <div class="option-list">
        <div
          class="option-item"
          data-option-text="Planeo la lactancia materna exclusiva, por lo que no proporcionar fórmula, infusiones, etc."
        >
          <span
            >Planeo la lactancia materna exclusiva, por lo que no proporcionar
            fórmula, infusiones, etc</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Si es necesaria la suplementación, prefiero usar mi leche extraída"
        >
          <span
            >Si es necesaria la suplementación, prefiero usar mi leche
            extraída</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
        <div
          class="option-item"
          data-option-text="Si es necesaria la fórmula, por favor, consúltenme y expliquen las razones"
        >
          <span
            >Si es necesaria la fórmula, por favor, consúltenme y expliquen las
            razones</span
          >
          <button class="add-btn">Añadir al plan</button>
        </div>
      </div>
    </div>

    <div id="other-section" class="plan-section">
      <h3>Otras Preferencias</h3>
      <div class="input-group">
        <label for="other-preferences"
          >Añade aquí cualquier otra preferencia que no hayas encontrado en las
          opciones anteriores.</label
        >
        <textarea
          id="other-preferences"
          name="other-preferences"
          rows="5"
        ></textarea>
      </div>
    </div>
  </section>
  <div id="toast" class="toast"></div>
</Layout>

<style>
  /* ... (Mismo CSS que en el archivo original) ... */

  .birth-plan-container {
    padding: 30px;
    max-width: 900px;
    margin: 0 auto;
    font-family: "Poppins", sans-serif;
    color: var(--dark-charcoal);
  }

  .instructions {
    background-color: var(--dusty-rose);
    border-left: 5px solid var(--deep-teal);
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 5px;
  }

  .intro-text {
    line-height: 1.6;
    margin-bottom: 40px;
    font-style: italic;
  }

  .plan-section {
    background-color: var(--pale-sand);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }

  .plan-section h3 {
    border-bottom: 2px solid var(--deep-teal);
    padding-bottom: 10px;
    margin-bottom: 15px;
    color: var(--dark-charcoal);
  }

  .input-group {
    margin-bottom: 15px;
  }

  .input-group label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
  }

  .input-group input[type="text"],
  .input-group textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--dusty-rose);
    border-radius: 5px;
    box-sizing: border-box;
    font-family: "Poppins", sans-serif;
  }

  .option-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .option-item {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #ffffff;
    padding: 10px 15px;
    border-radius: 5px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }

  .add-btn {
    background-color: var(--vibrant-coral);
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: background-color 0.3s ease;
  }

  .add-btn:hover {
    background-color: var(--rusty-red);
  }

  .add-btn[disabled] {
    background-color: var(--dusty-rose);
    color: #fff;
    cursor: not-allowed;
    pointer-events: auto;
  }

  .user-plan-container {
    margin-top: 40px;
    padding: 20px;
    background-color: #f7f7f7;
    border-radius: 8px;
  }

  #user-plan-list {
    list-style-type: none;
    padding: 0;
  }

  .plan-item {
    background-color: white;
    padding: 10px 15px;
    border-radius: 5px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }

  .remove-btn {
    background: none;
    border: none;
    color: var(--rusty-red);
    cursor: pointer;
    font-size: 1.2em;
  }

  #generate-pdf-btn {
    display: block;
    width: 100%;
    padding: 15px;
    margin-top: 20px;
    background-color: var(--deep-teal);
    color: white;
    border: none;
    border-radius: 5px;
    font-size: 1.1em;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  #generate-pdf-btn:hover {
    background-color: var(--gunmetal);
  }

  .toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: var(--deep-teal);
    color: #fff;
    padding: 10px 20px;
    border-radius: 5px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    opacity: 0;
    visibility: hidden;
    transition:
      opacity 0.5s ease-in-out,
      visibility 0.5s ease-in-out;
    z-index: 1000;
    font-family: "Poppins", sans-serif;
  }

  .toast.show {
    opacity: 1;
    visibility: visible;
  }

  .language-selector {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 20px;
  }
  .lang-btn {
    padding: 8px 16px;
    border: 2px solid transparent;
    background-color: #f0f0f0;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    text-decoration: none;
    color: var(--dark-charcoal);
  }
  .lang-btn.active {
    background-color: var(--deep-teal);
    color: white;
  }
  .lang-btn:not(.active):hover {
    background-color: var(--dusty-rose);
  }
</style>

<script>
  import jsPDF from "jspdf";

  function showToast(message) {
    const toast = document.getElementById("toast");
    if (toast) {
      toast.textContent = message;
      toast.classList.add("show");
      setTimeout(() => {
        toast.classList.remove("show");
      }, 3000);
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    const addButtons = document.querySelectorAll(".add-btn");
    const userPlanList = document.getElementById("user-plan-list");
    const generatePdfBtn = document.getElementById("generate-pdf-btn");

    addButtons.forEach((button) => {
      button.addEventListener("click", () => {
        const optionItem = button.closest(".option-item");
        const optionText = optionItem.getAttribute("data-option-text");
        const sectionTitle = optionItem
          .closest(".plan-section")
          .getAttribute("data-section-title");

        const isAlreadyAdded =
          userPlanList.querySelector(`[data-option-text="${optionText}"]`) !==
          null;

        if (!isAlreadyAdded) {
          const listItem = document.createElement("li");
          listItem.className = "plan-item";
          listItem.setAttribute("data-option-text", optionText);
          listItem.setAttribute("data-section-title", sectionTitle);
          listItem.innerHTML = `
                        <span>${optionItem.querySelector("span").textContent}</span>
                        <button class="remove-btn">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
          userPlanList.appendChild(listItem);

          // TEXTO FIJO TRADUCIDO
          button.textContent = "Añadida";
          button.disabled = true;
          button.title = "Preferencia ya añadida a tu lista";
          showToast("¡Preferencia añadida!");

          listItem
            .querySelector(".remove-btn")
            .addEventListener("click", () => {
              listItem.remove();
              // TEXTO FIJO TRADUCIDO
              button.textContent = "Añadir al plan";
              button.disabled = false;
              button.removeAttribute("title");
            });
        }
      });
    });

    if (generatePdfBtn) {
      generatePdfBtn.addEventListener("click", () => {
        generatePdfBtn.disabled = true;
        // TEXTO FIJO TRADUCIDO
        generatePdfBtn.textContent = "Generando PDF...";

        const personalInfo = {};
        const personalInfoSection = document.getElementById(
          "personal-info-section"
        );
        personalInfoSection
          .querySelectorAll(".input-group")
          .forEach((group) => {
            const label = group
              .querySelector("label")
              .textContent.replace(":", "")
              .trim();
            const value = group.querySelector("input").value;
            if (value) {
              personalInfo[label] = value;
            }
          });

        const otherPreferencesTextarea =
          document.getElementById("other-preferences");
        let otherPreferences = "";
        if (
          otherPreferencesTextarea &&
          otherPreferencesTextarea.value.trim() !== ""
        ) {
          otherPreferences = otherPreferencesTextarea.value.trim();
        }

        const sectionsData = {};
        document
          .querySelectorAll("#user-plan-list .plan-item")
          .forEach((item) => {
            const sectionTitle = item.getAttribute("data-section-title");
            const optionText = item.getAttribute("data-option-text");
            if (!sectionsData[sectionTitle]) {
              sectionsData[sectionTitle] = [];
            }
            sectionsData[sectionTitle].push(optionText);
          });

        const doc = new jsPDF("p", "mm", "a4");
        let y = 15;
        const margin = 15;
        const maxWidth = doc.internal.pageSize.getWidth() - 2 * margin;

        // TEXTOS FIJOS DEL PDF TRADUCIDOS
        const pdfTitle = "Mi plan de parto";
        const introText =
          "Hemos redactado este plan de parto de acuerdo con nuestros deseos para el nacimiento de nuestro/a hijo/a, después de asistir a sesiones prenatales de preparación al parto y de haber sido informados de nuestras opciones. Nuestras elecciones han sido tomadas conjuntamente y basadas en las directrices de organizaciones reconocidas que promueven el parto natural y la lactancia materna. Nos gustaría colaborar con nuestro equipo médico para garantizar una experiencia de parto tranquila y segura que apoye la salud física y emocional de la madre y de nuestro/a hijo/a. Estaremos encantados de discutir cualquier pregunta o inquietud que podáis tener.";
        const personalInfoHeading = "Información Personal";
        const otherPrefsHeading = "Otras Preferencias";
        const filename = "mi-plan-de-parto.pdf";

        // Generación del PDF (lógica del PDF)
        doc.setFontSize(22);
        doc.text(pdfTitle, margin, y);
        y += 10;

        doc.setFontSize(12);
        const introTextLines = doc.splitTextToSize(introText, maxWidth);
        doc.text(introTextLines, margin, y);
        y += introTextLines.length * 5;
        y += 10;

        doc.setFontSize(16);
        doc.text(personalInfoHeading, margin, y);
        doc.line(margin, y + 2, maxWidth + margin, y + 2);
        y += 7;

        for (const label in personalInfo) {
          doc.setFontSize(12);
          const text = `${label}: ${personalInfo[label]}`;
          const textLines = doc.splitTextToSize(text, maxWidth);
          doc.text(textLines, margin, y);
          y += textLines.length * 5 + 3;
        }
        y += 5;

        for (const title in sectionsData) {
          if (sectionsData.hasOwnProperty(title)) {
            if (y + 20 > doc.internal.pageSize.height - margin) {
              doc.addPage();
              y = 15;
            }

            doc.setFontSize(16);
            doc.text(title, margin, y);
            doc.line(margin, y + 2, maxWidth + margin, y + 2);
            y += 7;

            sectionsData[title].forEach((text) => {
              if (y + 10 > doc.internal.pageSize.height - margin) {
                doc.addPage();
                y = 15;
              }
              doc.setFontSize(12);
              const splitText = doc.splitTextToSize(`• ${text}`, maxWidth);
              doc.text(splitText, margin, y);
              y += splitText.length * 5 + 3;
            });
            y += 5;
          }
        }

        if (otherPreferences !== "") {
          if (y + 20 > doc.internal.pageSize.height - margin) {
            doc.addPage();
            y = 15;
          }
          doc.setFontSize(16);
          doc.text(otherPrefsHeading, margin, y);
          doc.line(margin, y + 2, maxWidth + margin, y + 2);
          y += 7;

          doc.setFontSize(12);
          const otherTextLines = doc.splitTextToSize(
            otherPreferences,
            maxWidth
          );
          doc.text(otherTextLines, margin, y);
          y += otherTextLines.length * 5 + 3;
          y += 5;
        }

        doc.save(filename);

        generatePdfBtn.disabled = false;
        // TEXTO FIJO TRADUCIDO
        generatePdfBtn.textContent = "Generar PDF";
      });
    }
  });
</script>
